{"is_source_file": true, "format": "TypeScript", "description": "This file provides lightweight API client helpers for a frontend project using TypeScript. It handles base URL retrieval, JSON fetch requests, response parsing, and error normalization for communication with a backend API.", "external_files": ["fetch", "process.env"], "external_methods": ["fetch"], "published": ["UnifiedError", "UnifiedEnvelope", "getApiBaseUrl", "jsonFetch", "parseUnifiedEnvelope", "fetchEnvelope"], "classes": [], "methods": [{"name": "export function getApiBaseUrl(): string { getApiBaseUrl", "description": "Returns the backend API base URL from environment variables, defaulting to 'http://localhost:8000'. Handles environment variable fallbacks and removes trailing slashes.", "scope": "", "scopeKind": ""}, {"name": "export async function jsonFetch(path: string, init?: RequestInit): Promise<Response> { jsonFetch", "description": "Performs a fetch request to the backend API with JSON headers, using the base URL from getApiBaseUrl, and includes credentials. Supports custom request options.", "scope": "", "scopeKind": ""}, {"name": "export async function parseUnifiedEnvelope<T = unknown>(res: Response): Promise<UnifiedEnvelope</ parseUnifiedEnvelope", "description": "Parses a fetch Response into a UnifiedEnvelope object, handling JSON and text content-types, and normalizes error responses.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchEnvelope<T = unknown>(path: string, init?: RequestInit): Promise<Unif/ fetchEnvelope", "description": "Combines jsonFetch and parseUnifiedEnvelope to make API requests and parse responses, with network error handling.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "getApiBaseUrl", "jsonFetch", "parseUnifiedEnvelope"], "search-terms": ["api client", "API request helpers", "UnifiedEnvelope", "error handling", "environment variable API URL", "fetch wrapper"], "state": 2, "file_id": 27, "knowledge_revision": 100, "git_revision": "", "revision_history": [{"86": ""}, {"93": ""}, {"100": ""}], "ctags": [{"_type": "tag", "name": "UnifiedEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export type UnifiedEnvelope<T = unknown> = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "UnifiedError", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export type UnifiedError = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "b", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const b = body as Record<string, unknown>;$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^  const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "jsonFetch", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^  const base =$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const code =$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "contentType", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^  const contentType = res.headers.get(\"content-type\") || \"\";$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const details =$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "env", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^      const env = body as UnifiedEnvelope<T>;$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const err = (typeof b.error === \"object\" && b.error !== null ? (b.error as Record<string, un/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "fetchEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export async function fetchEnvelope<T = unknown>(path: string, init?: RequestInit): Promise<Unif/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "jsonFetch", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export async function jsonFetch(path: string, init?: RequestInit): Promise<Response> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const message =$/", "language": "TypeScript", "kind": "constant", "scope": "parseUnifiedEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "parseUnifiedEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^export async function parseUnifiedEnvelope<T = unknown>(res: Response): Promise<UnifiedEnvelope</", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^  const url = `${base}${path.startsWith(\"\\/\") ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "jsonFetch", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^    const res = await jsonFetch(path, init);$/", "language": "TypeScript", "kind": "constant", "scope": "fetchEnvelope", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/client.ts", "pattern": "/^  const url = `${base}${path.startsWith(\"\\/\") ? path : `\\/${path}`}`;$/", "language": "TypeScript", "kind": "constant", "scope": "jsonFetch", "scopeKind": "function"}], "hash": "78fd148c1150027a6e34b01e8c0fb9c8", "format-version": 4, "code-base-name": "unified_connector_frontend", "filename": "unified_connector_frontend/src/lib/api/client.ts"}