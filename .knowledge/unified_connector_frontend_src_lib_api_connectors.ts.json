{"is_source_file": true, "format": "TypeScript", "description": "This file provides utility types, functions, and API request helpers for managing connectors and jobs within a software project. It includes type definitions for API envelopes, connector models, job primitives, environment helpers, fetch wrappers, and high-level API functions for interacting with backend endpoints related to connectors and jobs.", "external_files": ["fetch", "process.env", "URL", "AbortController"], "external_methods": ["fetch"], "published": ["getConnectorsByWorkspace", "getConnector", "updateConnector", "startConnectorJob", "authorizeConnector", "getJobSseUrl", "fetchConnectorsOrThrow", "toggleConnectorDetailsOrThrow", "startJobOrThrow", "normalizeOrThrow", "extractError", "isSuccess", "isError"], "classes": [], "methods": [{"name": "function getApiBaseUrl(): string { getApiBaseUrl", "description": "Resolves the API base URL from environment variables, ensuring no trailing slashes.", "scope": "", "scopeKind": ""}, {"name": "async function coreRequest<T>( coreRequest", "description": "Performs fetch requests to the API, parses and coerces responses into standardized envelope types.", "scope": "", "scopeKind": ""}, {"name": "export async function normalizeOrThrow<T>( normalizeOrThrow", "description": "Normalizes an API envelope response, throwing an error if it indicates failure.", "scope": "", "scopeKind": ""}, {"name": "export function extractError( extractError", "description": "Extracts and formats error details from an error envelope for display or logging.", "scope": "", "scopeKind": ""}, {"name": "export function isSuccess<T>( isSuccess", "description": "Type guard to check if an API envelope indicates a successful response.", "scope": "", "scopeKind": ""}, {"name": "export function isError<T>(env: ApiEnvelope<T>): env is ErrorEnvelope { isError", "description": "Type guard to check if an API envelope indicates an error response.", "scope": "", "scopeKind": ""}, {"name": "function withTenant( withTenant", "description": "Builds request options including tenant ID headers.", "scope": "", "scopeKind": ""}, {"name": "export function getConnectorsByWorkspace( getConnectorsByWorkspace", "description": "Fetches connector definitions associated with a specific workspace.", "scope": "", "scopeKind": ""}, {"name": "export function getConnector( getConnector", "description": "Retrieves details of a specific connector by its ID.", "scope": "", "scopeKind": ""}, {"name": "export function updateConnector( updateConnector", "description": "Updates connector configuration or properties.", "scope": "", "scopeKind": ""}, {"name": "export function startConnectorJob( startConnectorJob", "description": "Creates a new import, sync, or probe job for a specific connector.", "scope": "", "scopeKind": ""}, {"name": "export function authorizeConnector( authorizeConnector", "description": "Initiates OAuth authorization for a connector, expecting a redirect URL.", "scope": "", "scopeKind": ""}, {"name": "export function getJobSseUrl(jobId: string): string { getJobSseUrl", "description": "Constructs the URL for Server-Sent Events (SSE) stream of a job.", "scope": "", "scopeKind": ""}, {"name": "export async function fetchConnectorsOrThrow( fetchConnectorsOrThrow", "description": "Fetches and returns connector list or throws if error occurs.", "scope": "", "scopeKind": ""}, {"name": "export async function toggleConnectorDetailsOrThrow( toggleConnectorDetailsOrThrow", "description": "Toggles the 'extra_details' flag on a connector.", "scope": "", "scopeKind": ""}, {"name": "export async function startJobOrThrow( startJobOrThrow", "description": "Starts an import, sync, or probe job and returns the job object.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "getApiBaseUrl", "coreRequest", "normalizeOrThrow", "extractError"], "search-terms": ["connectors", "Unified Envelope", "API base URL", "OAuth", "connector definition", "job management", "REST API utilities", "Unified Connector Framework"], "state": 2, "file_id": 12, "knowledge_revision": 26, "git_revision": "", "revision_history": [{"25": ""}, {"26": ""}], "ctags": [{"_type": "tag", "name": "ApiEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type ApiEnvelope<T> = SuccessEnvelope<T> | ErrorEnvelope;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ConnectorDefinition", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type ConnectorDefinition = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ConnectorStatus", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type ConnectorStatus = \"connected\" | \"not_connected\" | \"error\";$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ErrorEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type ErrorEnvelope = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Job", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type Job = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "NormalizedApiError", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type NormalizedApiError = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "RequestOptions", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^type RequestOptions = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "SuccessEnvelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export type SuccessEnvelope<T> = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "allHeaders", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const allHeaders: HeadersInit = {$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "authorizeConnector", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function authorizeConnector($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const base = getApiBaseUrl();$/", "language": "TypeScript", "kind": "constant", "scope": "getJobSseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const base =$/", "language": "TypeScript", "kind": "constant", "scope": "getApiBaseUrl", "scopeKind": "function"}, {"_type": "tag", "name": "baseMessage", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const baseMessage =$/", "language": "TypeScript", "kind": "constant", "scope": "extractError", "scopeKind": "function"}, {"_type": "tag", "name": "baseUrl", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const baseUrl = options.absoluteUrlOverride || `${getApiBaseUrl()}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const { method = \"GET\", tenantId, body, headers = {}, signal } = options;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^        code: \"unexpected_format\",$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "code", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^      code: \"non_json_response\",$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "coerced", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^      const coerced: ErrorEnvelope = {$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "coerced", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^      const coerced: SuccessEnvelope<T> = {$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "coreRequest", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^async function coreRequest<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^        data: json as T,$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "envelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const envelope = json as ApiEnvelope<T>;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "envelope", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const { envelope, status } = await promise;$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "err", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const err = extractError(envelope as ErrorEnvelope, status);$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "extractError", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function extractError($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "fallback", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^    const fallback: ErrorEnvelope = {$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "fetchConnectorsOrThrow", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export async function fetchConnectorsOrThrow($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^function getApiBaseUrl(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getConnector", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function getConnector($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getConnectorsByWorkspace", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function getConnectorsByWorkspace($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getJobSseUrl", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function getJobSseUrl(jobId: string): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^    headers: allHeaders,$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "headers", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const { method = \"GET\", tenantId, body, headers = {}, signal } = options;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "init", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const init: RequestInit = {$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "isError", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function isError<T>(env: ApiEnvelope<T>): env is ErrorEnvelope {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "isSuccess", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function isSuccess<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "maybeOk", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const maybeOk =$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "method", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const { method = \"GET\", tenantId, body, headers = {}, signal } = options;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "msg", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^      const msg =$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeOrThrow", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export async function normalizeOrThrow<T>($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^      const parsed = (json ?? {}) as Record<string, unknown>;$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const res = await fetch(baseUrl, init);$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "signal", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^    signal,$/", "language": "TypeScript", "kind": "constant", "scope": "coreRequest", "scopeKind": "function"}, {"_type": "tag", "name": "startConnectorJob", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function startConnectorJob($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "startJobOrThrow", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export async function startJobOrThrow($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^  const { envelope, status } = await promise;$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeOrThrow", "scopeKind": "function"}, {"_type": "tag", "name": "toggleConnectorDetailsOrThrow", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export async function toggleConnectorDetailsOrThrow($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updateConnector", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^export function updateConnector($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "withTenant", "path": "/home/kavia/workspace/code-generation/unified-connector-framework-143961-143971/unified_connector_frontend/src/lib/api/connectors.ts", "pattern": "/^function withTenant($/", "language": "TypeScript", "kind": "function"}], "hash": "41d68f850451a3ba944cc537e4557090", "format-version": 4, "code-base-name": "unified_connector_frontend", "filename": "unified_connector_frontend/src/lib/api/connectors.ts"}